# Week11 

## feedback ##

아이폰XS로 촬영한 소스의경우 좋은렌즈가 아니라 외곽이 왜곡이 심하다. (많이 울렁울렁거림)

그래서 트래킹하기에 부적절한 소스 → 트랙이 밀리기 때문에

십자모양의 영역을 좀 더 정확한 위치에 찝어주면 트랙이 더 잘 될것이다.

중간중간 퉁 퉁 흔들림 이건 어쩔수없음 사람이 들고가면 덜컹덜컹 할수밖에없다. 그래서 짐벌을 쓴다. 

Sharpen노드 → 좀더 진하게 만들어주는 이거 쓰고 트래킹하고 다시 노드 지우기 → 트래킹을 위해 이미지를 강조시키는… 

바닥면을 잡을때 카드를 바닥에 놓고 카메라 트래커 노드에서 씬을 회전시킬 수 있다.
바닥면 카드 놓고 → 큐브올리기 → 그냥 큐브를 놨을때보다 더 나음 


밀린 트레커에 이미지를 붙이면 티가 너무 많이난다 →밀려보인다…

1픽셀 1픽셀을 민감하게 반응해야 한다.

3D -씬 로테이션을 잡아주시면 좋을것 같다.


트래킹 마커 찍을때 확대 엄청 안했죠 … ( 엄청나게 확대해서 포인트 찍기) 

EdgeBlur 노드 → 엣지블러

---

<br>
<br>

# 모니터 화면 교체 

모니터,속 화면 교체작업이 많을 것 
물체가 등장하는 씬에서 실제로 그 오브젝트 화면을 들고 촬영하는 경우도 있지만 노출을 잘 설정하지 않으면 기본적으로 이런 화면 굉장히 밝은 광원에 LED가 들어있어 카메라가 노출을 잡게되면 화면이 밝으면 주변이 어두워짐 

화면에 트래킹 마커를 띄워놓고 작업을 하면 → 이미지 작업이 편하다.

그린스크린 모바일 치면 합성할 화면플레이트가 있음.

4포인트 트레킹 하면 되고. 4포인트 트레킹이 나오면. 우리가 뭘 할 수 있다?→ 트래커 4개 선택해서 코너핀 가능. 

코너핀2D 유즈프레임 베이크 →작업한 트레커로 노드생성
CornerPin2D ( use current frame/ use current frame, baked ) 

자동으로 반영되는 노드(Use current frame) / 자동으로 반영되지 않는 노드 .(baked)

직접 키를 넣은거 -진한 파란색 / 직접 키를 넣지 않은것 -연한 파랑 (자동반영)

사용할거는 진한파랑.

코너핀 → 프롬 → 세트인풋 → 코너핀에 맞춰짐

해소하는 방법 -컨스턴스로 노드 미리 만들어서 작업하기 또는, 리포맷,프리멀트⇒사라짐!

세트인풋해서 끝나는경우도 있지만 지금은 사진이 안에 들어가있는상황

이럴땐 **코너핀을 하나 더 달것임** 강제로 밖으로 붙여줄것.

트랜스폼 노드랑 비슷하게 블러도있고 셔터도잇음. 

처음엔 이미지에 맞춰서 720에 맞춰져있음

→설정창 →프롬 을 통해서 애니메이션을 하거나 이미지를 강제로 사각형의 모양을 바꿔줄 수 있음. 


Conerpin→ 프로젝트 포맷의 해상도로 설정이 됨 . 1080을 선택하면 1080이 됨. 이게 뭔소리냐면 프로젝트 포맷 자체의 영상을 클릭하고 코너핀을 생성하면 1080으로 생성된다는거임 저 위에 나팔부는 이미지는 720이어서 나팔부는 이미지를 잡고 코너핀을 생성했더니 720으로 나옴


얘를 연결하면 어떻게 되냐 ⇒ 코너핀이 사방에 있어서 인풋이랑 달라짐… →프로젝트의 해상도가 1920이어서 이렇게 크게 맞춰진것 4k면 더 크겠지 → 프롬이 이 인풋에 맞아야 하는데 from이 나팔이미지에 맞아야하는데 안 맞춰져 있으니까

from = 인풋이미지의 해상도를 맞춰주면 되는것. 

맞춰준것에 to로 조작을 한다. 

귀찮으면 세트인풋을 하면 인풋이미지에 (720) 해상도를 자동으로 맞춰줌.
이미지가 늘어나는 것처럼 보이는것 ⇒ from의 4개의 핀을 to의 위치로 이동시키는 것.


to를 움직이면 원본의 from을 움직이는것. 

그래서 쓰는 방법이 from하고 to를 강제로 맞추는

copy from을 누르면 from하고 to가 강제로 일치 ⇒to를 조작해서 쉐잎 조절이 가능. 

## 순서 

1. 리드파일에서 트래킹함
2. 트래킹하고 핀을 만들어서 매취 스크린 사이즈를만듬 (베이크드노드)
3. 그후 화면에 넣을 이미지를 잡고 코너핀을 만듬 
4. 그걸 위에 노드에 넣고 투를 움직이면 끝

1. 코너핀 트렉을 정교하게 잡는다.
2. 크게 많이 벗어나지 않으면 가장 쉬운 방법이 손으로 키를 잡아준다. → 레퍼런스가 되는 프레임 최대한 화면이 잘보이는 프레임을 골라서 → 키프레임을 잡아준다.

그래서 여러분들이 정리하는 습관을 들일 수 있는게 모든 노드에는 설정에 노드탭이 있다.

- track matchmove라고 적으면 밑에 이름이 써지거든요.
- 코너핀 2D8번은 스크린사이즈매치시키는거잖아요? - Match Screen Size 로 써놓으면 됨.

스크린 사이즈를 맞춰놨기 때문에

스크린사이즈 (애니메이션 안되는거)- 매치무브 (애니메이션 되는거 ) 순서로 둬야함. 

움직이지 않는것의 크기를 맞춰주는게 더 쉽다. 움직이지 않는 상태로 스케일을 잡고

매치무브를 통해 움직임을 맞춰주는것임.

<br>
<br>

## 같은 작업인데 다르게 하는 방법 \스테빌라이즈(역방향으로 움직여서 가만히있는것처럼 하는것)


트래커 4개 선택

트랜스 폼의 스테빌라이즈(역방향으로 움직여서 가만히있는것처럼 하는것) 베이크드 만들기

트래킹마커가 거의 멈춰있는것처럼 보이고 → 플레이트의 바운딩 박스가 움직임이 줄어들지.

트랜스폼 노드의 임버트 노드가 있다.(마우스잇는곳) 클릭하면 지금 들어있는 것의 역함수가 적용이 되어서 다시 원상복귀가된다.

그럼 노드 중간에 넣으면 되겠다는 판단이 서지 → 머지삽입.

코너핀 삽입 → from은 코너핀이 원래 있어야할 위치 input의 위치로 맞추고.

 / to는 input을 어디에 붙일것이냐에 맞추는거죠 

to를 조작해서 위치를 맞춘다. 

플레이트가 스테빌라이즈가 되어있기때문에 정적이어서 코너핀을 맞추기가 쉽다.

여기서 다시 맨 밑의 역방향 노드의 이름 설정 - <1-stabillze> = 1 - 붙히는거 맞음  
invent 체크 → 역방향으로 움직여서 잘 따라옴. 

**어떤샷이냐에 따라 알아서 두가지 중 선택** 


1. 간판
2. 자동차번호판
3. 각종전단지 등등 다 갈아엎을 수 있음.

---

<br>
<br>

## **누크2.5D카메라 만들기**

중간고사때 사용한 분도 있는데 아닌분도 있어서 방법 소개를 할것임. 

2D이미지 → 3D공간으로 바꿔서 → 카메라 트래킹을 하는것. → 어떤 씬이든 2.5D처럼 바꿔서 작업 가능.

레이어가 나뉘어있죠 여기서 확인가능

포토샵은 -알파를 바로 투명도로 보고 

누크는 -알파를 채널, 데이터로 본다.

스카이.알파를 보면 알파가 흰색으로 들어와있어서 스카이 밑 검은색은 투명하구나 알 수 있음.

 2.5디 쓸때 많이 쓰는거 *카드*라고 하는 플레인 오브젝트. 큐브같은 3D 오브젝트

shuffle셔플노드생성 → 기본적으로 rgba데이터 (원본) → 
그 밑에 premult 프리멀트 노드 두기! → 알파 날아감.

이 매트패인팅의 모든 레이어를 이렇게 다 나눠줌. 

프리멀트 노드 밑에 card노드를 만들어줌 → 씬 노드를 만들어줌 

* 이 노드들을 복사를 여러개 해서 레이어마다 만들어주는것! → shuffle 노드에서 레이어를 바꿔주기!(노드설정 →노드에서 이름 바꿔서 레이어 이름으로 바꿔주면 더 좋겠지) /그러나 최대한 타이핑을 덜 하고싶어 →그렇다면 노드에 [Value in1] 이라고 적으면 → 바꿔놓으면 레이어 구성을 바꾸는대로 이름이 바뀜!

- Value in1 = 레이어 선택된 이름을 노드에 넣어줘라

렌더링하려면 -렌더링할 카메라/렌더러 필요

누크에서는 camera → 3D 카메라 생성. / 씬 에 연걸해주면 연결해서 볼수 있음

스캔라인랜더노드 → 카메라가 볼때 카메라가보는 화곽에 걸리는 애들을 라인을 스캔해서 뭐가있네를 2D로 변환해주는 노드 → 스캔라인랜더노드 사각형노드 →3D가 2D가 된것임.

카메라 오브젝트 씬 연결을 다 해주면 아무것도 안보이지

사유: 카메라렌즈보다 카드가 뒤에있어서 

카드들을 잡아서 뒤로 멀리 보냄 (원초적으로)  = translate의 z노드를 옮겼음

그러면은 어떻게 해야할까 멀리 간만큼 스케일을 키워줘야함.

**이렇게하지말고** 

카드라고하는 노드 → z라는 값 조작

카메라에서 멀어지면 멀어진 만큼 화각안에 딱 들어오게 만들어줌…

z값을 수정하면 땅기건 밀건간에 레이어간의 뎁스가 겹쳐졌을때 겹쳐지지만 화면에서 보는 스케일은 같다. 단순하게 플레이트의 크기를 유지하면서 뎁스를 주고싶다 하면 → 스케일 , 트렌스레잇을 조절하지 말고 z 값을 이용을 하시면 편리하게 얘네들을 맞출 수 있다. 

이렇게 되고 나면 카메라에 키를 줘서 … 앞으로 주욱 가는 카메라 액션 만들수있다. 

마야에서 공간을 만들다기보다는 누크에서도 2.5D 공간을 만들면

나중에 → 애니메이션에서 굳이 만들필요없이 이렇게 매트페인팅으로 애니메이션을 만들 수 있을듯

오브젝트를 두고 transform Geo1 노드를 달아서 rot/pos/scale 따로 만들어서 달아놓기.

순서는 로테잇→스케일→ 트랜스폼 (포지션)

포지션에 키를 주고 → 움직이기


<br>
<br>


## ZDefocus

포인트가 맞을 위치를 지정할 수 있음. / 카메라를 이용해서 깊이감을 만들어 놨으니까

포커스를 오른쪽에 맞출경우 포커스를 주게 되는것임. 

2D이미지를 가지고 3D 같은 효과를 쉽게 낼 수 있다. 

움직이면 포커스가 바뀌나요? → 바뀐다.

중경배경쪽에 포커스가 맞고 앞은 블러 됐죠 .

**size로 조절가능 . !!**

카메라로 실습을 많이해라 

<br>
<br>

## 3D 카메라 만들기

단순한 2D 복도 이미지 학교! 
 **project 3D 노드를 만들면**


* 빔프로젝터와 스크린의 관계라고 생각하면 됨. 빔프가 쐈는데 비칠물체가 있어야 상이 맺힘 스크린을 놧기 때문에 투사한게 보이는거죠 → 프로젝트3D노드가 같은것.하나는 투사할 이미지/ 하나는 투사할 카메라가 들어오면 아웃풋이미지가 나오지 3D오브젝트에다가 투사가능 거기에 이미지 카드를 삽입하는거지.

이걸 왜해? 복도샷 같은거 →스케일키워 → 스케일키우면 픽셀 깨지잖아 그걸 회피가능

프로덕션 캠이라고 부르는 카메라외에는 아무것도 없는 상황

ㄴ> 오브젝트에 투사가 되게 카드 노드를 달아준다. 


## 순서
씬 생성 / 
스캔라인 랜더 생성 / 
프로젝션 카메라는 손대지 않는다. /
랜더링 하는 카메라는 별개로 가져가야한다. /
이 후에 여러개의 카드를 만들어서 상을 여러개 만든다. /
옆면을 만들것 → 카드 → 스케일,로테이트 조절 

반대쪽또 똑같이 만들기.

그 뒤엔 위 아래 만들기. ⇒ 3D공간의 형성




# Expression
- C와 유사한 구문식을 사용/ 채널 값에 복잡한 수학공식 적용/ 필요에 따라 다른 채널 세트에 다른 식 적용 가능.

• x 또는 y는 픽셀 좌표.입력이 프록시 이미지일 경우 크기가 조정되어 풀사이즈 이미지에 포함되는 좌표로 변환

• cx와 cy는 보다 유용한 좌표계를 제공.이 시스템에서는 0이 그림의 중심

-1.0은 왼쪽 가장자리 중앙, 1.0은 오른쪽 가장자리 중앙, 1.1은 오른쪽 가장자리 원점에서 45도 위(애스펙트비가 1보다 큰 경우 사진 상단)

• 빨간색 채널의 경우 r과 같이 모든 입력 채널을 이름으로 참조할 수 있다.

• 어떤 노드의 제어든 그 이름으로 참조할 수 있다.

ex) Blur1.size는 블러의 크기를 반환합니다.애니메이션 컨트롤(예: Blur1.size(t))을 평가할 수도 있습니다.

• 공백 표현은 0과 같다.

• 모든 연산은 32비트 부동 소수점 숫자로 이루어짐

[출처](https://learn.foundry.com/nuke/content/reference_guide/color_nodes/expression.html)

