# Week13

나를 로토에서 구해줄 도구

합성은 하면 무조건 좋은 단계

- 작은 잘못 찍혀진 프레임도 고칠수있고 원치않던 발견의 물체라던가 간판들조명들 이런것들을 촬영할때 다 컨트롤못한것을 후반에 할 수 있다는것이 자유로운 작업.

- But 로토작업 필수적. 그러므로 로토작업을 쉽게 하는방법 구상 필요
---

**오늘 배울것 :** 
- 인공지능을 이용해 매트따는 방법
- 뷰티작업이라고 표현하는데 배우의 잡티 주름을 없애는 작업 
<br>
<br>

--- 

## CapyCat 노드

[출처](https://learn.foundry.com/nuke/content/reference_guide/air_nodes/copycat.html
)

[출처](
https://www.youtube.com/watch?v=pwe6WakkAuc&t=6s
)

<br>

- CapyCat (NUKE X/ NUKE Studio만 해당)
가비지 매트, 미용 복구, 디블러링 등 시퀀스 고유의 효과를 시퀀스 내의 소수의 프레임에서 복사하고 네트워크를 훈련하여 이 효과를 전체 시퀀스에 복제한다.

- CopyCat은 훈련받은 네트워크를 .cat 파일로 출력하여 노드에 효과를 적용함

6개의 키포즈 노드를 잘라서 로토따기

ㅣ

머신러닝을 이용해서

ㄴ 노드 Copy Cat 

![카피켓](https://user-images.githubusercontent.com/112802528/208243592-1005480a-f848-40a3-aa62-22de30a4d29a.JPG)

- 그라운드 투스 - 인풋 두개의 아웃풋 

- 정답(그라운드투스)/ 문제(인풋) 를 의미함 

- 머신러닝을 훈련시킬때 개랑 고양이를 분류하는것마냥 훈련시켜야함

개 - 네이밍 :강아지 - 강아지 사진 10개

고양이 - 네이밍: 고양이- 고양이 사진 10개 

- 이렇게 해놓으면 고양이와 강아지를 분석할 수 있는것처럼…

![카피켓2](https://user-images.githubusercontent.com/112802528/208243648-597dae4f-5965-496c-9dec-b337bfb2be48.JPG)

- 노드에 정답과 문제만 넣어주면 꽤 괜찮은 결과를 찾을 수 있다.

- 오리지널 시퀀스 230프레임인데

- 카피켓 노드에서 훈련을 시켜볼게요

인공지능은 정말 똑같은 카피켓을 쓰지만

누구는 잡티지우는데 쓰고 누구는 매트따는데 쓰고 누구는 트레킹마커를 지우는데 쓰고

다 여러가지 방법으로 사용을 한다. 

노드를 보면 - 데이터 디렉터리 - 훈련할 자료를 어디에 저장할 것이냐

폴더만들어서 지정해주기. - 훈련한 데이터가 쭉 쌓일것

![트레이닝](https://user-images.githubusercontent.com/112802528/208243782-750837e0-cbd1-48d9-85d0-8e0707fb7457.JPG)

epochs 보시면 6장의 데이터가 있죠 →몇번 훈련을 할거냐 라는 겁니다

ㄴ 6667번이면 6장의 데이터를 한번씩 훈련하는걸 6667번 한다는 뜻.

수치가 높을수록 훈련반복 →정확한결과

채널- rgba채널 두 인풋에 있는 알지비 채널을 비교를 해서 결과를 만든다.

crop size 256으로 해야 무난한… →그래픽 카드가 비싸면 크롭 사이즈를 키워도 무리가 없지만

보통 이정도 선에서 …

스타트트레이닝 클릭

NVIDIA 지포스 - 인공지능을 한다 하면 이 그래픽 카드를 쓸수밖에 없어 

다되면 - 크리에이팅 인피어런스 - 노드가 생성됨

얘는 이렇게 불러와도 되지만 그냥 인피어런스 노드를 꺼내서 model fail을 불러와도 된다.

좋은 그래픽 카드를 써서 이걸 사용해서 하면 작업량이 줄겠죠?

남은건 어떻게할까 - 로토로 할 수 도 있지만 더 쉬운 방법

ㄴ 셔플 달아서 레드에만 연결 - 그레이드 달아서 블랙포인트 올려서 조절

남은 애들은 로토로 가볍게 따줄수도 있고 블랙과 화이트를 클릭 한다던가 …. - 

로토클릭해서 배우만 로토 따서 가비지먼트만해줘야함 

카피노드로 레드를 알파에다 넣어주면 끝 - 영상보고 사진추가

-프리멀트 달아서 알파만 남겨주면 끝_ 

우리는 - 컴포지터가 아니라 흥미 컨텐츠를 제작하는 가운데에서 합성을 쓰는거니까 

그런 측면에서 이걸 알려준거임.


# 재밌는 노드 소개

##  TVIscale 노드
[출처](https://learn.foundry.com/nuke/content/reference_guide/transform_nodes/tviscale.html)

- 이미지의 배율을 2배로 조정한다.
- 가장자리를 유지하면서 노이즈를 최소화 하는 TVI (Total Variational lnpainting) 기술 사용
- 람다 컨트롤이 주 컨트롤, 값이 클수록 허용되는 스무딩이 줄어들고 원본 이미지에 노이즈가 많을 수록 이미지가 커진다.


tvi scale 노드를 쓰면 원본에 디테일을 살리면서 → 스케일을 두배 해준것.

스케일을 할때 얘를 주로 쓰는 편…

설정에 이터너셜 숫자를 조절 하는것

upscale2라는 노드 → 인공지능이 2배 크기로 이미지를 그려내는것.

얘는 좀 필터랑도 맞지않는 방식으로 그리는것 이 tvi스케일이랑 비교해보면 디테일도 꽤 잘 살아있고 헤어디테일도 잘살아있고 이게 지금 업스케일한건데 완벽한것은 아님 다크하게 엣지가 있기도해…

Deblur 노드 - 카메라 포커스 블러를 조금 줄여주는 노드 예를들면 아웃포커싱 된 의자

이런걸 살리고싶어 뒤에 아웃포커싱된걸 그걸 좀 줄여줘 그래서 선명하게 해줘

모션블러가 많이된것은 돌아오지 않음….

---


쓰리디로 만들때 애니메이션을

마야와 아놀드만이 정답인가 유연하게 생각할 필요가 있다

언리얼엔진 사용도 괜찮다 


---

### 누크를 더 깊게 사용할 수 있는 몇가지 방법들

반복되는 액팅의 경우엔 -

익스프레션을 사용할수가있어요 

예를들어 - Gatimedia 

Expressions&TCL tips < 들어가 

[gatimedia.co.uk/expressions](http://gatimedia.co.uk/expressions) 

스크립트 컨트롤씨 → 컨트롤브이 하면 (메모장에)→ 누크 스크립트에 들어있는 텍스트가 뽑아지지

ㄴ 이 스크립트로 구성된거 누크를안켜고도 할수있쬬 ….

ㄴ 이런걸 tcl tips 이라고 하는듯

랜덤 - 0에서 1사이의 어떤 숫자

애니메이션 키값 복사하기 :::  카피링크 → 페이스트 엘러티브 

그냥 이번것도 영상으로 저장을 해야할거같다….. 

밸류: 파라미터이름값 노출! → 이거 홈페이지에 들어가면 있어 

마우스 올리면 조그맣게 이름이 뜬단말임 → 노드에 [ ] 대괄호 치고 입력해놓으면

밑에 프레임이나 정보값이 쓰게 할수있어 

ex. [value_rotate] / 텍스트랑도 같이 써놓을 수 있음… rotate: [ ] 이렇게 

NoOp 노드 - > 노드들은 이미지의 수치 조절 계싼을 하지 

근데 그것들을 오퍼레이션 줄여서 옾이라고 하는데 아무것도 하는일이 없어서 노옵이라고 이름이 지어져있음 . → 얘는 닷 노드랑 똑같다 (점이랑 똑같애…)  노드정리할때 쓰잖아 

결론 컨트롤하는 노드인거임

연필모양아이콘으로 - > 매니지유저노브에서 생성할수있는 여러가지 요소들을 조합해서 쓸수있음

드래그앤드랍해서 집어넣을수잇어

