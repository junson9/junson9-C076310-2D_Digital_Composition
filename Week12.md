# Week12

*팁주기 - 해상도가 크지 않음 HD로 하실분들은 세로형은 720에 1280

소스를 너무 크게 만들 필요가 없음. 최종해상도에 맞춰 작업한다. 

컷이 여러개일때 한 누크 스크랩트에서 작업 하려고 하지 않기 

---

쓰리디프로그램에서 랜더한걸 어케 지지고 볶고 어케 하는지 알려드리겠다.

nvidia nerf / 사진찍어서 3D로 만드는거

랜더이미지와 배경을 합치는 방법.

(3D물체와 배경을)

헬리콥터의 모델링데이터 exr 파일과 배경 합치기.

렌더링할때 따로따로 떄려 넣을수가 있는 것임.

마야실행-

이미지 한장에 20개의 레이어가 들어감.

랜더를 각각 하는데 노력이 필요가 없다. 랜더 세팅하는데 체크해주냐 안해주냐에 따라 나뉨

헬리콥터이미지) 왜 나누는지? 이따가 보여줄건데 - 디퓨즈 로우라고 알비노라고 불리는 - 빛정보 없는것 디퓨저

디퓨즈랑 인다이렉트 얘네들은 디퓨즈 로우의 빛 정보를 가지고 있다.

AOV라는 탭에 이런 정보가 있음 (마야에)

알지비-알지비

뎁스-Z

N노멀패스,노멀맵- N

디퓨즈 스펙큘러 sss 이런걸 넣어주면 다 분활해준다.

-합성할때 편하려고 알지비를 가져와서 마스킹하기 쉽게 하려고 쓰는거임..

cryptomatte. - 다른색들로 누크가 채워넣음

랜더링한이미지를그대로합성에쓰진않는다 

무조건 최종 컬리티를 3ㅣ에서 만들어야지 라고 생각하면 졸업을 못할수도 있다.

—

컬러그레이딩을 하고 프리멀트를 해야하나?

프리멀트를 하고나서 컬러그레이딩을 해야한다.

합성할때 반드시 / 지금 3D샷이어서 3D만 하면된다가 아니라 여러분들이 크로마 작업할때 키빼고 색보정이나 디스필하고 하잖아요 그때도 반드시 프리멀트가 컬러그레이딩보다 나중에 와야한다.

엣지가 다크하게 바뀌는 이유- 프리멀트 뒤에다가 그레이딩

그레이딩 하고 나서 프리멀트 한거 - 엣지가 다크하게 안바뀜.

언프리멀트 - 픽셀이 익스텐션되어있다.

3D로 랜더링을 하면 - 1픽셀 차이로 반투명하다. →언프리멀트를 해보면 이런 데이터다라는걸 알 수 있음.

그래서 우리가 언프리멀트한 상태에서 그리딩을 해주면 외곽에있는 픽셀까지 그레이딩이 다 들어간단말야…. 

- 엣지가 다크하게 바뀌는 이유: 프리멀트된 상태에서 그레이딩을 하면 자연스럽게 알파가 쑥 빠지게되질 않으니까 엣지에 다크하게 생기는거임.

**모든 여러가지 레이어들 소스들이 들어가서 배경에 얹어질때 이 컬러 그레이딩은 반드시 프리멀트 위에 있어야 한다** 

그니까 알려준거

1.3D물체에서 exr파일로 aov로 파트별로 렌더하는거

1. 3D물체의 컬러그레이딩 후 프리멀트를 어디에 두는지

샤픈같은필터쓰는경우가 생기는데

정상적으로 샤픈필터를 먹이고 리니어로 사이즈를 올렸을 뿐인데 이미지만 샤픈을 주고싶었는데 이미지가 타버림… - LOg2LIN1 노드!

log2Lin1 누크가 기본적으로 리니어상태로 컬러스크립트를 바꾸잖아

뷰어는 srgb로보여주고 랜더링할때 우리가 결정한 컬러스페이스로 내보내잖아

강제로 로그이미지를 log로 바꿔주는거임. 

카메라를 사용해본 경험 - > 뿌옇게 나오는 부분 / slog라고 불리는 컬러스페이스로 촬영 →중간톤부스트상태 

강제로 로그스페이스로 바꿔주는거임 log2lin1 로그를 리니어로 바꾸다.

오퍼레이션을 눌러보면 두개를 바꿀수도있음.

리니어이미지를 불러왔으니까 로그이미지로바꾼다 하는것.

결론 샤픈필터를 먹일때 - log2lin으로 리니어에서 로그로 바꿔주고 필터를 적용하고 다시 로그를 리니어로 바꿔준다 → lin2log로 오퍼레이션을 바꿔주면됨 (설정에서)

---

이미지에 랜더패스가 있는걸 알게됐죠

셔플이라고 불리는 노드로 각각 나뉠수 있다.

이미지레이어 안에 들어있는 렌더패스를 확인할 수 있죠 셔플에서 

패스를 나눠서 빛만 줄일수가 있다. 

패스 나눠서 조절해야할때가 있음 프리셋으로 만들어서 노드전체를 저장해서쓰는게 좋다 .

크리에이트 - 툴셋메뉴 

root 메뉴 아이템-BH_AOV_COMP 크리에이트

해놓으면 언제든 크리에이트 메뉴에서 노드를 꺼내서 쓸 수 있음. 

기즈모저장폴더 - 사용자 윈도우 유저 - 사용자명 - .누크- 툴셋 -에 들어가면 저 스크립트가 생겨

합성하는 시간을 써야 애니메이션의 퀄리티가 올라간다.

지금까지 알려준건 당연히 해야하는것 

---

쓰리디 랜더링을 하면 얻는 다양한 이점

노멀맵의 역할 - 카메라가 바라보는 z축 카메라로 이 물체를 촬영을한다

그러면은 시간이많고 모델링을 잘 한다면 컵의 글씨 마크 모델링을 하는게 맞겠죠

근데 우린 할시간없어 → 노멀맵을 쓰죠? 텍스쳐를 이용해서

이 면을 평평하게 해놓고 오브젝트를 놓은다음에 노멀 베이크를 놓기도 하죠

그럼 카메라가 찍었을때 카메라랑 정반으로 보는애랑 카메라랑 xyz면으로 보고있는 면이있겠죠

그걸 컬러로 표현한겁니다. 

셔플 쓰고 - 그레이드 써서 마스크 조절해서 g 채널의 빛만 바꿀수도있어. 

컬러매트릭스 연결 애식스 노드 Ccolor matriz1 // Axis <로케이터회전이랑 비슷

컬러매트릭스노드

ㄴ행렬계산 3x3 

기본행태

100

010

001 

그래서 에식스랑 컬러 메트릭스를 연결을 하는거임 왜냐면 저 행렬계싼 숫자를 하나하나 바꿀순없잖아

컨트롤키누르고 드래그하기. 

유튜브에 누크 노말 컴포지팅 치면 엄청많이나와 

STMap5 -UV채널에 연결하는거.

RG만있는 채널

ㄴ 결론 랜더링 된거에 유브이를 갈아 끼울수도 있다는 소리임…

---

관련 동영상 utilizing 3d work flows nuke for episodic animation
https://youtu.be/v4AxNsqkqUI

참고할 영상 (exr set up)
https://youtu.be/YnuOm0il0PY 

참고 할 영상2 (3d compositing in nuke (영어아님))

리드프롬파일 → 카메라 정보를 불러오는것. 
fbx = maya 추출 포맷

 cache export selection alex -> 카메라 값을 뽑고 
 
 누크에서 camera object를 생성 후 read from file해서 maya에서 추출한 카메라 값 연결
